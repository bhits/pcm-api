<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:include="fragment/common :: headerFragment"  />

<head>
	<meta name="_csrf" th:content="${_csrf.token}"/>
	<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
	
	<!-- Custom CSS Files -->
	<link th:href="@{/resources/css/custom/valueset-style.css}" rel="stylesheet" />
</head>

<body id="conceptCodeMgmt-page">

<div class="container outmost-holder">
	<!-- !START: Page Header -->
	<header class="navbar navbar-static-top" role="banner" th:with="currentPageTitle='Concept Code Management',currentPageURI='/sysadmin/conceptCodeList.html'">
		<div class="container">
			<div class="navbar-header navbar-inner-header" role="navigation" th:substituteby="fragment/sysadmin_fragments :: navbarHeaderFragment">
			
			<!-- EVERYTHING INSIDE HERE IS REPLACED BY THYMELEAF WITH THE navbarHeaderFragment -->
			<!-- The code below is here only to enhance source code readability -->
			
					<a th:include="fragment/common :: mobileMenuButtonFragment" class="btn btn-info btn-mainmenu" data-toggle="collapse" data-target=".top-nav.navbar-collapse,.sidebar-nav.navbar-collapse">
						<span class="fa fa-bars"></span>
					</a>
					<h1>
						<span class="nav-title">Concept Code Management</span>
					</h1>

					<span th:include="fragment/common :: logoFragment">
						<div style="position: relative;">
							<a id="logoFragment" class="navbar-brand brand logo-fragment" th:href="@{/index.html}"  href="index.html"><span id="brand-blue"></span><img src="../../resources/img/consent2share-04.svg" th:src="@{/resources/img/consent2share-04.svg}" /></a>
							<span id="watermark" class="pg-watermark"><i><p>This site is for DEMONSTRATION PURPOSES only.</p></i></span>
						</div>
					</span>
			</div>
	
			<div th:if="${conceptCodeDto}" id="event_notification_bar">	
				<div th:if="${conceptCodeDto.isError}" class="alert alert-warning rounded" >
	 				<span th:text="${conceptCodeDto.errorMessage}">exception
						...</span>
				</div> 	
				<div th:unless="${conceptCodeDto.isError}" class="alert alert-success rounded" >
	 				<span th:text="${conceptCodeDto.successMessage}">Success
						...</span>
				</div> 				
								
			</div>	

	
		</div>
	</header>
	
	<div id="under-header"></div>

		<!-- END : Page Header -->
	<div id="conceptCodeMgmt-page" class="container">

		<div class="row main-content-wrapper">

			<div id="content" class="content">
				<!-- START: Side Nav Menu -->
				<div th:substituteby="fragment/sysadmin_fragments :: sideNavMenuFragment" class="col-md-2 col-sm-3 main-menu-span">
				</div>
				<!-- END: Side Nav Menu -->


				<!-- JavaScrip Enable Message -->
				<noscript th:substituteby="fragment/common :: noscriptFragment">
					<div class="alert alert-warning col-md-10 col-sm-9">
						<p id="h4-style" class="alert-heading">Warning!</p>
						<p>You need to have <a href="https://en.wikipedia.org/wiki/JavaScript" th:href="@{https://en.wikipedia.org/wiki/JavaScript}"
						target="_blank">JavaScript</a>enabled to use this site.</p>
					</div>
				</noscript>

	<!-- START: Code System List -->
	
	<div id="page-subcontent-holder" role="main" class="col-md-10 col-sm-9">			
			<div class="row">			

		<!-- COMPONENT: Code System -->

			<div id="conceptcode_display_area">
				<section class="top-margin10 bottom-margin10">
                   
                   <fieldset class="row">
                       <legend>Concept Code <span class="btn-right-align">
                       </span></legend>
                                              
                       <div class="top-margin10">
	                       	<div class="row" id="accordian1">
	                       		<div class="panel panel-default bottom-margin0">
	                       			<div class="panel-heading">
	                       				<h4 class="panel-title" style="line-height: 0.8;">
	                       					<a data-toggle="collapse" data-parent="#accordion1" href="#collapseOne">Adding Concept Codes</a>
	                       				</h4>
	                       			</div>
	                       		
		                       		<div id="collapseOne" class="panel-collapse collapse">
	                					<div class="panel-body">     
				                       		<div>
				                       			<button id="add-valueset-btn" onClick="window.location.href='conceptCodeAdd.html'" class="btn btn-success btn-sm add-btn">
				                       				<span class="fa fa-plus fa-white"></span>
				                       				<span>Add a Concept Code</span>
				                       			</button>
				                       		</div>
				                       		<form id="batch_conceptcode_upload_form" th:action="@{/sysadmin/conceptCode/batchUpload}+'?'+${_csrf.parameterName}+'='+${_csrf.token}" th:object="${conceptCodeDto}" method="post" enctype="multipart/form-data">
					                       		<div class="summary-border top-margin10">
					                       		
					                       		    <div class="form-group">
			                							<label for="batch_select_codesys" class="control-label">Code System: </label>
			                							<div>
															<select id="batch_select_codesys" name="codeSystemId" class="form-control required">
																<option selected="selected" value="">- Select Code System - </option>
															 	<option th:each="codeSystem :${codeSystems}" th:value="${codeSystem.name}"  th:text="${codeSystem.name}"/>
															 </select>
			    	            						</div>
			    	            					</div>
			    	            					
			    	            					 <div class="form-group">
			                							<label for="batch_select_version" class="control-label">Code System Version: </label>
			                							<div>
															<select id="batch_select_version" name="codeSystemVersionId" class="form-control required" disabled="disabled">
																<option selected="selected" value="">- Please Select -</option>
															</select>
															
															<div id="batch_cs_version_data_holder" class="hidden">
																<span th:if="${conceptCodeVSCSDto}" >
																 	<div th:each="csVersion :${conceptCodeVSCSDto.csVersions}" class="hidden" th:id="'batch_cs_versions_for_cs_'+${csVersion.codeSystemId}">
																 		<input th:each="csVersionDtoMap :${csVersion.versionsMap}" type="hidden" class="batch_cs_version_data" th:id="'batch_input_cs_version_'+${csVersion.codeSystemId}+'_'+${csVersionDtoMap.key}" th:attr="data-cs-id=${csVersion.codeSystemId},data-cs-version-key=${csVersionDtoMap.key},data-cs-version-value=${csVersionDtoMap.value},data-cs-name=${csVersion.codeSystemName}" />
																 	</div>
																 </span>
															 </div>
			    	            						</div>
			    	            					</div>
			    	            					
			    	            					<div class="bottom-margin10">
		                                    			<button class="btn btn-primary" data-toggle="modal" data-target="#valueSetName-modal"><span></span><span>Select Value Set Names</span></button>
		                                   			 </div>
		                                   			 <div id="selected_valusets_name_display_holder" class="selected_valusets_name_holder"></div>
			    	            					
			    	            					<!-- value set modal -->
		                                    <div class="modal fade" id="valueSetName-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  												<div class="modal-dialog">
    												<div class="modal-content">
												      <div class="modal-header">
												        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
												        <h4 class="modal-title" id="myModalLabel">Value Set Names</h4>
												     </div>
												    <div class="modal-body">
		                                    
				                                     	<div>Please Select Value Set Names</div> 
				                                    	<div id="valset_list_holder" class="checkbox-inline">
				                                    		<span th:if="${conceptCodeVSCSDto}" >
						                                    	<div  th:each="valueSet :${conceptCodeVSCSDto.valueSetsMap}">
						                    	                	<input class="valset_list_record" name="valueSetIds" type="checkbox" th:value="${valueSet.key}"  th:text="${valueSet.value}"
						                     		               		th:attr="data-valset-id=${valueSet.key}, data-valset-name=${valueSet.value}" />
						                                    
																</div>
															</span>
														</div>														
														</div>
													<div class="modal-footer">
														<!-- <div class="row bottom-btn-group"> -->
					                               			<button id="btn_cancel_valuesetname" type="button" class="btn btn-default" style="margin: 0 10px 0 0;" 
												                     data-dismiss="modal"  aria-hidden="true">Cancel</button>
					                               			<button id="btn_save_valuesetname"  class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Save</button>
					                                	<!-- </div> -->
					                                </div>
												</div>
												</div>
											</div>
													<!-- end of value set modal -->	
			    	            					
			    	            					
		    	            						<div>
							                        	<label for="batchupload_file"><em><strong>Choose Concept Codes to Upload</strong></em></label>
							                        </div> 						                							
		                							<div class="inline" style="margin-right: 5px;">
														<input id="batchupload_file" type="file" name="batch_file" class="btn btn-sm btn-info" style="font-weight: bold;" />
		    	            						</div>
							                       
							                       <div class="inline controls">
							                       		<input id="batch-upload-conceptcode-btn" class="btn btn-primary btn-sm add-btn" type="submit" value="Batch Upload Concept Codes" />
							                       </div>
							                       <div id="file_err_msg"></div>
		    	            					</div>
		    	            					
	    	            					</form>
		                       			</div>
		                       		</div>
		                       	</div>
	                       	</div>
                       </div>
                                              
                   </fieldset>
                </section>
                       
                       
                <section id="accordian2">
                	<div id="filter_valuesets_div" class="row">
                		<div class="panel panel-default">
                			<div class="panel-heading">
                				<h3 class="panel-title" style="line-height: 0.8;">
                				<a data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">Concept Codes Search Options</a>
                				</h3>
                			</div>
                			<div id="collapseTwo" class="panel-collapse collapse">
                			<div class="panel-body">

                					<form class="col-xs-12 col-sm-9" role="form">
                						<div class="form-group">
                							<label for="select_filter_on_cs" class="control-label force-bold force-italic">Code System: </label>
                							<div>
												<select id="select_filter_on_cs" name="codeSystemId" class="form-control">
													<option selected="selected" value="">- Select Code System - </option>
												 	<option th:each="codeSystem :${codeSystems}" th:value="${codeSystem.name}"  th:text="${codeSystem.name}"/>
												 </select>
    	            						</div>
    	            					</div>
    	            					<div class="form-group">
                							<label for="select_filter_on_cs_vs" class="control-label force-bold force-italic">Code System Version: </label>
                							<div>
												<select id="select_filter_on_cs_vs" name="codeSystemVersionId" class="form-control" disabled="disabled">
													<option selected="selected" value="">- Please Select -</option>
												</select>
												
												<div id="cs_version_data_holder" class="hidden">
													<span th:if="${conceptCodeVSCSDto}" >
													 	<div th:each="csVersion :${conceptCodeVSCSDto.csVersions}" class="hidden" th:id="'cs_versions_for_cs_'+${csVersion.codeSystemId}">
													 		<input th:each="csVersionDtoMap :${csVersion.versionsMap}" type="hidden" class="cs_version_data" th:id="'input_cs_version_'+${csVersion.codeSystemId}+'_'+${csVersionDtoMap.key}" th:attr="data-cs-id=${csVersion.codeSystemId},data-cs-version-key=${csVersionDtoMap.key},data-cs-version-value=${csVersionDtoMap.value},data-cs-name=${csVersion.codeSystemName}" />
													 	</div>
													 </span>
												 </div>
    	            						</div>
    	            					</div>
    	            					<div class="form-group">
                							<label for="select_filter_on_valset_name" class="control-label force-bold force-italic">Value Set Name: </label>
                							<div>
                								<select id="select_filter_on_valset_name" class="form-control" name="valueSet">
													<option selected="selected" value="">- Select Value Set Name -</option>
												 	<option th:each="valueSet :${valueSets}" th:value="${valueSet.id}"  th:text="${valueSet.name}"/>

    	            							</select>
    	            						</div>	    	            						
    	            					</div>
    	            					
    	            					<div class="form-group">	    	            						
	    	            						<div class="summary-border">
	    	            							<div>
	    	            								<p><em><strong>Search by one:</strong></em></p>
	    	            								    	            								
	    	            								<div class="input-group sysAdmin-input bottom-margin10"> 
	    	            									
	    	            									<input type="text" style="font-weight: bold;" id="txt_search_conceptcode_code" class="form-control" placeholder="Enter Code"></input>
	    	            									<span class="input-group-btn">
														    	<button id="btn_search_conceptcode_code_submit" class="btn btn-success" type="button"><span class="fa fa-search"></span></button>
														    </span>
	    	            								</div>
	    	            								     								
	    	            								<div class="input-group sysAdmin-input bottom-margin10">
	    	            									<input type="text" style="font-weight: bold;" id="txt_search_conceptcode_name" class="form-control" placeholder="Enter Concept Code Name"></input>
	    	            									<span class="input-group-btn">
	    	            										<button id="btn_search_conceptcode_name_submit" class="btn btn-success"><span class="fa fa-search"></span></button>
	    	            									</span>
	    	            								</div>
	    	            								<button id="btn_search_conceptcode_reset" class="btn btn-default">Reset</button>
	    	            							</div>
	    	            						</div>	    	            						
	    	            				</div>	    	            				
    	            				</form>
                			</div><!-- end panel body -->
                			</div>
                		</div>
                	</div>
                </section>
                       
<!--                  <section>
	                  <form id="conceptcodes_batchuplad_form" class="form-horizontal" th:action="@{/sysadmin/valueSet/conceptCodesUpload}+'?'+${_csrf.parameterName}+'='+${_csrf.token}" method="post" enctype="multipart/form-data">
		                  <div class="control-group">
		                    <span class="control-label">Concept Codes Batch Upload</span>
			                   <div class="controls form-inline">
			                   		
			                   		<input id="batchupload_file" type="file" name="file" />
			                   		<input id="batch-upload-conceptcodes-btn"  class="btn btn-success btn-xs add-btn" type="submit" value="Batch Upload Concept Codes" />
			                   </div>
		                   </div>
	                  </form>
					</section> -->
      
                <section>
                	<table id="current_conceptcodes_table" class="table table-striped table-bordered">
                       <thead>
                           <tr id="conceptcodes_table_header">
                               <th colspan="5">Current Concept Codes</th>
                           </tr>
                            <tr id="conceptcodes_codesearch_table_header" class="hidden">
                               <th colspan="5">Results for <span style="color: #428bca;">Concept Code Code</span> Search.</th>
                           </tr>
                            <tr id="conceptcodes_namesearch_table_header" class="hidden">
                               <th colspan="5">Results for <span style="color: #428bca;">Concept Code Name</span> Search.</th>
                           </tr>
                           <tr id="conceptcodes_filter_table_header" class="hidden">
                               <th colspan="5">Results for <span style="color: #428bca;">Filter(s)</span>.</th>
                           </tr>
                       </thead>

                       <tbody class="hidden">
		                      <tr>
		                      		<td></td>
		          		 			<td class="bold">Code</td>
		          		 			<td class="bold" style="width: 30%;">Name</td>		               		 		
		               				<td class="bold">ValueSet Name</td>
		               				<td class="bold">CodeSystem Name : Version Name</td>
							  </tr>
			           </tbody>
                	</table>
              	</section>
			</div>
			
			<div id="conceptcode_pagination_holder" class="sysAdmin_pagination" th:include="fragment/sysadmin_fragments :: pagination_fragment">
			<!-- ***************************************************************************************************************** -->
			<!-- EVERYTHING INSIDE HERE IS REPLACED BY THYMELEAF WITH THE pagination_fragment -->
			<!-- The code below is here only to enhance source code readability -->
			<!-- ***************************************************************************************************************** -->
			
				<div id="pagination_numresults_holder" class="pagination">
					<span style="margin: 0;">Total Results: &lt;<span id="pagination_numresults" class="force-inline no-pad" style="margin:0; float:none;"></span>&gt;</span>
				</div>
				<ul class="pagination">
					<li id="pagination_first" class="pagination-li disabled">
  						<span class="pagination-icon pagination-control">&laquo;</span>
  					</li>
  					<li id="pagination_prev" class="pagination-li disabled">
  						<span class="pagination-icon pagination-control">&lsaquo;</span>
  					</li>
  					<li id="pagination_1" class="pagination-li pagination-page active">
  						<span class="pagination-icon pagination-pagenum" data-pagenum="1">1</span>
  					</li>
					<li id="pagination_next" class="pagination-li disabled">
						<span class="pagination-icon pagination-control">&rsaquo;</span>
					</li>
					<li id="pagination_last" class="pagination-li disabled">
						<span class="pagination-icon pagination-control">&raquo;</span>
					</li>
				</ul>
				
			<!-- ***************************************************************************************************************** -->
			<!-- END OF SECTION REPLACED BY THYMELEAF -->
			<!-- ***************************************************************************************************************** -->
			</div>
			
		</div>
		</div><!--/#content.col-md-10-->
			</div><!--/fluid-row-->
<!-- END: Code System List --> 
</div>

	<div th:if="${panelState} eq 'resetoptions'" id="div_panelStateInfo" data-panel-state="resetoptions" class="hidden"></div>
	<div th:if="${panelState} eq 'addnew'" id="div_panelStateInfo" data-panel-state="addnew" class="hidden"></div>

</div>
<!-- START: Footer Region -->
<footer class="bottom" th:include="fragment/common :: [//footer[@id='center-footer']]">

		<!-- COMPONENT: Copyright Information -->
		<p class="top-margin10 pull-left">&copy; <a class="footer-link" href="" target="_blank">A SAMHSA Public Service</a> 2013</p>
</footer>
<!-- END: Footer Region -->
</div>

<script th:src="@{/resources/js/webpage-js/deepcopyutility.js}"
	src="../../../../resources/js/webpage-js/deepcopyutility.js"
	type="text/javascript"></script>	

<script th:src="@{/resources/js/webpage-js/sysadmin/valueSetMgmt.js}"
	src="../../../../resources/js/webpage-js/sysadmin/valueSetMgmt.js"
	type="text/javascript"></script>
	
<script th:src="@{/resources/js/webpage-js/sysadmin/conceptCodeList.js}"
	src="../../../../resources/js/webpage-js/sysadmin/conceptCodeList.js"
	type="text/javascript"></script>	
	
<script src="../../../../resources/js/jquery.validate.min.js"  
	th:src="@{/resources/js/jquery.validate.min.js}" type="text/javascript"></script>	
	
<script src="../../../../resources/js/jquery.validate.additional-methods.min.js"  
	th:src="@{/resources/js/jquery.validate.additional-methods.min.js}" type="text/javascript"></script>	

</body>
</html>
